var canvas,stage,exportRoot,anim_container,dom_overlay_container,fnStartAnimation,$=jQuery;function redeemLicense(){let e=$("#unify_pro_license_key").val(),a=$("#unify_domain_name").val(),n=[];n["license-key"]=e,n["domain-name"]=a,valid_pro_license_fields()&&ajax_to_validate_license(n)}function valid_pro_license_fields(){let e=!0,a="",n=$("#unify_pro_license_key").val(),r=$("#unify_domain_name").val();return""===n&&(e=!1,a="Unify Pro License Key",$("#unify_pro_license_key-error").remove(),$("#unify_pro_license_key").after('<label id="unify_pro_license_key-error" class="text-danger" for="unify_pro_license_key">'+a+" is a required field.</label>")),""===r&&(e=!1,a="Domain",$("#unify_domain_name-error").remove(),$("#unify_domain_name").after('<label id="unify_domain_name-error" class="text-danger" for="unify_domain_name">'+a+" is a required field.</label>")),""!==r&&r.replace(/[^.]/g,"").length<2&&(e=!1,a="Please provide a valid domain name",$("#unify_domain_name-error").remove(),$("#unify_domain_name").after('<label id="unify_domain_name-error" class="text-danger" for="unify_domain_name">'+a+". </label>")),!!e}function ajax_to_validate_license(e){var a=localStorage.getItem("testing_domain");$.ajax({beforeSend:function(){$(".overlayDiv").show()},data:{action:"validate_pro_license",unify_pro_license_key:e["license-key"],unify_domain:e["domain-name"],testing_domain:a},dataType:"json",type:"POST",url:ajaxurl,success:function(e){var a=e.msg,n="",r=e.status;e.redirect;0==r?(a+=" <i class='fa fa-exclamation-triangle' aria-hidden='true'></i>",n="red",$(".validated_msg").css({position:"absolute",bottom:"12px",left:0})):($("#unify_pro_license_key").prop("readonly",!0),a+=" <i class='fa fa-check-circle' aria-hidden='true'></i>",n="green",closeModal("proLicenseModal"),openModal("proLicenseSuccessModal")),$(".validated_msg").html(a),$(".validated_msg").css("color",n),$(".validated_msg").css("display","inline-block"),$(".validated_msg").delay(5e3).fadeOut("slow")},error:function(e){color="red",msg="Invalid Credential <i class='fa fa-exclamation-triangle' aria-hidden='true'></i>",$(".validated_msg").html(msg),$(".validated_msg").css("color",color),$(".validated_msg").css("display","inline-block"),$(".validated_msg").delay(5e3).fadeOut("slow")},complete:function(e){$(".overlayDiv").hide()}})}function openModal(e){document.getElementById(e).classList.add("show-flex")}function closeModal(e){document.getElementById(e).classList.remove("show-flex")}function init(){canvas=document.getElementById("canvas"),anim_container=document.getElementById("animation_container"),dom_overlay_container=document.getElementById("dom_overlay_container");var e=AdobeAn.getComposition("5AE0EAACF0C348F0B55971AF7A711973"),a=e.getLibrary();createjs.MotionGuidePlugin.install();var n=new createjs.LoadQueue(!1);n.addEventListener("fileload",(function(a){handleFileLoad(a,e)})),n.addEventListener("complete",(function(a){handleComplete(a,e)}));a=e.getLibrary();n.loadManifest(a.properties.manifest)}function handleFileLoad(e,a){var n=a.getImages();e&&"image"==e.item.type&&(n[e.item.id]=e.result)}function handleComplete(e,a){var n=a.getLibrary(),r=a.getSpriteSheet(),o=e.target,t=n.ssMetadata;for(i=0;i<t.length;i++)r[t[i].name]=new createjs.SpriteSheet({images:[o.getResult(t[i].name)],frames:t[i].frames});exportRoot=new n.unifywordpresstransfer_HTML5Canvas,stage=new n.Stage(canvas),fnStartAnimation=function(){stage.addChild(exportRoot),createjs.Ticker.framerate=n.properties.fps,createjs.Ticker.addEventListener("tick",stage)},AdobeAn.makeResponsive(!0,"both",!1,1,[canvas,anim_container,dom_overlay_container]),AdobeAn.compositionLoaded(n.properties.id),fnStartAnimation()}function downgrade(){$.ajax({beforeSend:function(){$(".progress-text").html("100%"),$(".progress-bar").addClass("w-100"),$(".product-info").html("Rolling back all settings…"),init(),closeModal("downgradeModal"),$("#transeferringModal").addClass("downgrade"),openModal("transeferringModal")},data:{action:"downgrading",delete:"1"},dataType:"json",type:"POST",url:ajaxurl,success:function(e){setTimeout((function(){$(".progress-bar").removeClass("w-100"),$(".progress-bar").addClass("w-75"),$(".progress-text").html("75%")}),2e3),setTimeout((function(){$(".progress-bar").removeClass("w-75"),$(".progress-bar").addClass("w-50"),$(".progress-text").html("50%")}),6e3),setTimeout((function(){$(".progress-bar").removeClass("w-50"),$(".progress-bar").addClass("w-25"),$(".progress-text").html("25%")}),12e3),setTimeout((function(){$("#transeferringModal").removeClass("downgrade"),closeModal("transeferringModal"),openModal("rollBackModal")}),13e3)},error:function(e){},complete:function(e){}})}function startTransefer(){var e=localStorage.getItem("testing_domain");$.ajax({beforeSend:function(){init(),closeModal("proLicenseSuccessModal"),openModal("transeferringModal")},data:{action:"configurationDataCollection","from-button":"1",testing_domain:e},dataType:"json",type:"POST",url:ajaxurl,success:function(e){const a=e.status,n=(e.redirect,e.msg);1==a?(setTimeout((function(){$(".progress-bar").removeClass("w-25"),$(".progress-bar").addClass("w-50"),$(".progress-text").html("50%"),$(".product-info").html("Transferring your shipping information…")}),2e3),setTimeout((function(){$(".progress-bar").removeClass("w-50"),$(".progress-bar").addClass("w-75"),$(".progress-text").html("75%"),$(".product-info").html("Transferring all your settings…")}),6e3),setTimeout((function(){$(".progress-bar").removeClass("w-75"),$(".progress-bar").addClass("w-100"),$(".progress-text").html("100%")}),12e3),setTimeout((function(){closeModal("transeferringModal"),openModal("transeferCompleteModal")}),13e3)):(closeModal("transeferringModal"),$(".transfer_fail").html(n),openModal("TransferFailedModal"))},error:function(e){closeModal("transeferringModal"),openModal("TransferFailedModal")},complete:function(e){}})}function validate_endpoint(e){var a=e.value;checked_url=a.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").split("/")[0],$("#unify_domain_name").val(checked_url)}function requestCancellation(){$.ajax({beforeSend:function(){$(".overlayDiv").show()},data:{action:"requestCancellation",x:$("#request_cancellation_form").serialize()},dataType:"json",type:"POST",url:ajaxurl,success:function(e){const a=e.status,n=e.msg;1==a&&($(".request_cancel_form").css("display","none"),$(".upgrade-request").css("display","flex")),$(".validated_msg").html(n),$(".validated_msg").css("color","green"),$(".validated_msg").css("display","inline-block"),$(".validated_msg").delay(5e3).fadeOut("slow")},error:function(e){color="red",msg="Some error occured <i class='fa fa-exclamation-triangle' aria-hidden='true'></i>",$(".validated_msg").html(msg),$(".validated_msg").css("color",color),$(".validated_msg").css("display","inline-block"),$(".validated_msg").delay(5e3).fadeOut("slow")},complete:function(e){$(".overlayDiv").hide()}})}$(document).on("keyup","#unify_domain_name",(function(){$(this).val().replace(/[^.]/g,"").length<2?(message="Please provide a valid domain",$("#unify_domain_name-error").remove(),$("#unify_domain_name").after('<label id="unify_domain_name-error" class="text-danger" for="unify_domain_name">'+message+".</label>")):$("#unify_domain_name-error").remove()})),$(document).on("keyup","#unify_pro_license_key",(function(){""===$(this).val()?(message="Unify Pro License Key",$("#unify_pro_license_key-error").remove(),$("#unify_pro_license_key").after('<label id="unify_pro_license_key-error" class="text-danger" for="unify_pro_license_key">'+message+" is a required field.</label>")):$("#unify_pro_license_key-error").remove()})),$(document).ready((function(){$("#submit_cancellation").click((function(){return $.validator.addMethod("customemail",(function(e,a){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}),""),$("#request_cancellation_form").validate({rules:{first_name:{required:!0},last_name:{required:!0},email:{required:!0,customemail:!0},mobile:{required:!0,number:!0,minlength:10,maxlength:15},reason:{required:!0}},messages:{first_name:{required:"First Name is a required field."},last_name:{required:"Last Name is a required field."},email:{required:"Email Address is a required field.",email:"Please provide a valid email address."},mobile:{required:"Phone Number is a required field.",digits:"Please provide a valid phone number."},reason:{required:"Comment is a required field."}},errorClass:"error",errorPlacement:function(e,a){$(this).addClass("error")}}),!!$("#request_cancellation_form").valid()&&(requestCancellation(),!0)}))}));